<!DOCTYPE html>
<html class="no-js" lang="zh-Hans">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="p5.js a JS client-side library for creating graphic and interactive experiences, based on the core principles of Processing.">
    <title tabindex="1">learn | p5.js</title>
    <link rel="stylesheet" href="/assets/css/all.css?v=618ad0">
    <link href="https://fonts.googleapis.com/css?family=Montserrat&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inconsolata&display=swap" rel="stylesheet">

    <link rel="shortcut icon" href="/../../../assets/img/favicon.ico">
    <link rel="icon" href="/../../../assets/img/favicon.ico">


    <script src="/../../../assets/js/vendor/jquery-1.12.4.min.js"></script>
    <script src="/../../../assets/js/vendor/ace-nc/ace.js"></script>
    <script src="/../../../assets/js/vendor/ace-nc/mode-javascript.js"></script>
    <script src="/../../../assets/js/vendor/prism.js"></script>
    <script src="/assets/js/init.js?v=97b4f7"></script>

    <script src="/../../../assets/js/vendor/pangu.min.js"></script>

  </head>
  <body>

    
    <!-- p5*js language buttons -->
    <div id="i18n-btn">
      <h2 id="i18n-settings" class="sr-only">语言设定</h2>
      <ul id="i18n-buttons" aria-labelledby="i18n-settings">
        <li><a href='#' lang='en' data-lang='en'>English</a></li>
        <li><a href='#' lang='es' data-lang='es'>Español</a></li>
        <li><a href='#' lang='zh-Hans' data-lang='zh-Hans'>简体中文</a></li>
        <li><a href='#' lang='ko' data-lang='ko'>한국어</a></li>
        <li><a href='#' lang='hi' data-lang='hi'>हिन्दी</a></li>
      </ul>
    </div>    <!-- .container -->
    <div class="container">

      <!-- logo -->
      <header id="lockup">
        <a href="/zh-Hans/">
          <img src="/../../../assets/img/p5js.svg" alt="p5 homepage" id="logo_image" class="logo" />
          <div id="p5_logo"></div>
        </a>
      </header>
      <!-- close logo -->

      

<style>
  .methodsList {
    font-family: monospace;
  }

  .additionalInformation {
    width: 100%;
    background-color: #dedeff;
    padding: 10px;
    margin: 30px 0;
  }

  .toc {
    width: 100%;
    background-color: #eee;
    padding: 10px;
    margin: 30px 0;
  }

  .toc h3 {
    margin-top: 15px;
  }

  .indexList {
    padding: 15px;
    background-color: whitesmoke;
  }
</style>

<div id="learn-page">

  
  <!-- site navigation -->
  <div class="column-span">
    <nav class="sidebar-menu-nav-element">
      <h2 id="menu-title" class="sr-only">网站导航</h2>
      <input class="sidebar-menu-btn" type="checkbox" id="sidebar-menu-btn" />
      <label class="sidebar-menu-icon" for="sidebar-menu-btn"><span class="sidebar-nav-icon"></span></label>
      <ul id="menu" class="sidebar-menu" aria-labelledby="menu-title">
        <li><a href="/zh-Hans/">主页</a></li>
        <li><a href="https://editor.p5js.org">编辑器</a></li>
        <li><a href="/zh-Hans/download/">下载</a></li>
        <li><a href="/zh-Hans/download/support.html">捐赠</a></li>
        <li><a href="/zh-Hans/get-started/">入门</a></li>
        <li><a href="/zh-Hans/reference/">参考文献</a></li>
        <li><a href="/zh-Hans/libraries/">程式库</a></li>
        <li><a href="/zh-Hans/learn/">学习</a></li>
        <li><a href="/zh-Hans/teach/">教学</a></li>
        <li><a href="/zh-Hans/examples/">范例</a></li>
        <li><a href="https://p5js.org/contributor-docs/#/">贡献</a></li>
        <li><a href="/zh-Hans/books/">书籍</a></li>
        <li><a href="/zh-Hans/community/">社群</a></li>
        <li><a href="https://showcase.p5js.org">案例展示</a></li>
  
      </ul>
    </nav>
  </div>

  <div class="column-span">

    <main>
      <script src="//toolness.github.io/p5.js-widget/p5-widget.js"></script>

      <h1>在 WebGL 中创建自定义几何体</h1>

      <p>p5.js 有许多基本形状，如<a class="code">box()</a>或<a class="code">sphere()</a>，但 p5.js 也能够呈现复杂的自定义几何体，无论是从3D模型文件还是从代码中。本教程将演示如何将3D模型导入到 p5.js，以及如何从头开始创建几何体。</p>

      <div class="additionalInformation">如果您是 3D 新手，请查看<a href="{{root}}/learn/getting-started-in-webgl-coords-and-transform.html">坐标和变换</a>教程。<a
          href="/zh-Hans/learn/getting-started-in-webgl-coords-and-transform.html">Coordinates and
          Transformations</a>教程。</div>

      <div class="toc">
        <h3>目录</h3>
        <ol>
          <li><a href="#3dModels">从文件中加载3D模型</a></li>
          <li><a href="#proceduralGeometry">创建基本过程几何体</a>
          </li>
          <li><a href="#conclusion">结论</a></li>
          <li><a href="#glossary">词汇表</a></li>
        </ol>
      </div>

      <h2 id="3dModels">从文件中加载3D模型</h2>

      <p>可以使用 OBJ 或 STL 文件将自定义几何体导入 p5.js。这些文件通常是在诸如 Blender 之类的 3D 建模工具中生成的，该工具在构建 3D 场景时提供了更多控制。 这是使用<a class="code" href="{{root}}/reference/#/p5/loadModel">loadModel()</a>方法完成的，应在<a class="code">preload()</a>中使用。<a class="code"
          href="/zh-Hans/reference/#/p5/loadModel">loadModel()</a> 方法，应在 <a class="code">preload()</a> 中使用。然后可以使用<a class="code">function</a> 在模型中进行绘制，如下面的示例所示。 <a class="code"
          href="/zh-Hans/reference/#/p5/model">model()</a> ，使用绘制函数在模型中进行绘制，如下面的示例所示。</p>

      <script type="text/p5" data-autoplay data-p5-version="1.7.0">
let teapotModel;

function preload() {
  teapotModel = loadModel('../../../assets/learn/basic3d/models/teapot.obj', true);
}

function setup() {
  createCanvas(150, 216, WEBGL);
  debugMode();
  describe('displays a model of a teapot using normalMaterial()');
}

function draw(){
  background(255);
  normalMaterial(); // For effect
  model(teapotModel);
}
      </script>

      <p>自定义模型可能遇到的常见问题是缩放。根据模型的构建方式，在 p5.js 中呈现时其大小可能会完全不同，甚至过小以至于无法渲染。 <a class="code">loadModel()</a>方法包括一个 normalize 参数，可以将模型调整为在p5.js中更好运行的大小。</p>

      <div class="additionalInformation">请注意，当前不支持带有颜色的 STL 文件，但是您可以使用材料或纹理添加颜色，您可以在<a href="{{root}}/learn/getting-started-in-webgl-appearance.html">样式和外观</a>教程中学习。<a
          href="/zh-Hans/learn/getting-started-in-webgl-appearance.html"> 样式和外观</a> 教程。</div>

      <h2 id="proceduralGeometry">创建基本过程几何体</h2>

      <p>几何体还可以使用代码进行过程化定义。这是创建可以移动或使用您自己的一组规则形成的几何体的绝佳方式。 有许多方法可以使用它们在 p5.js 中类似于 2D 绘图的方式创建 3D 几何体。例如， <a class="code">quad()</a>、<a class="code">triangle()</a>、<a class="code">rect()</a> 和 <a class="code">circle()</a> 等方法都有额外的参数，使它们可以用于 3D。</p>

      <p>还有其他方法可以更好地控制几何体。可以使用<a class="code" href="{{root}}/reference/#/p5/beginShape">beginShape()</a>、 <a class="code" href="{{root}}/reference/#/p5/vertex">vertex()</a> 和 <a class="code" href="{{root}}/reference/#/p5/endShape">endShape()</a> 逐点定义形状。 下面的示例演示了如何使用这些方法在数学上构建 3D 形状。 <a class="code"
          href="/zh-Hans/reference/#/p5/beginShape">beginShape()</a>, <a class="code"
          href="/zh-Hans/reference/#/p5/vertex">vertex()</a>, 和  <a class="code"
          href="/zh-Hans/reference/#/p5/endShape">endShape()</a>. 下面的示例演示了如何使用这些方法在数学上构建 3D 形状。</p>

      <script type="text/p5" data-autoplay data-p5-version="1.7.0">
function setup() {
  createCanvas(windowWidth, windowHeight, WEBGL);
  describe('a red 3d spiral shape created with beginShape and endShape');
}

function draw(){
  background(220);
  
  // click+drag on canvas to look around the shape
  orbitControl();
  
  fill(255,0,0,128);
    
  var numVertices = 100;
  translate(0,numVertices,0);
  rotateY(millis()/1000);
  scale(20);
  beginShape();
  // a simple spiral shape
  for(let i = 0; i < numVertices; i++) {
    vertex(
      sin((i/numVertices*TWO_PI)*5)*sin(i/numVertices*PI)*2,
      -i/10, 
      cos((i/numVertices*TWO_PI)*5)*sin(i/numVertices*PI)*2,
    );
  }
  endShape();
}
      </script>

      <p>还有一个强大的类，<a class="code" href="{{root}}/reference/#/p5/p5.Geometry">p5.Geometry</a>，p5.js 内部使用 <a class="code">loadModel()</a>，但也可用于定义自定义几何体，提供可以有助于计算面和法线的工具。 <a class="code" href="/zh-Hans/reference/#/p5/p5.Geometry">p5.Geometry</a>，p5.js 内部使用<a class="code">loadModel()</a>，但也可用于定义自定义几何体，提供可以有助于计算面和法线的工具。</p>



      <p>在 3D 中，面指的是由三个或四个点组成的集合，这些点形成了一个表面，使我们的几何体具有实体的外观。法线是垂直于面的方向，这有助于 p5.js 计算表面上的光照。</p>

      <div style="display: flex; align-items: center; justify-content: center;">
        <img style="padding:30px; width:60%;" src='../../../assets/learn/basic3d/images/normals_face_example.png'
          alt="an illustration a collection of three points, constituting a face, and an arrow extending perpendicular to it, the normal" />
      </div>


      <p>在下面的示例中，使用 <a class="code">p5.Geometry</a> 绘制几何体的网格点。然后，<a class="code">computeFaces()</a> 用于使几何体具有实体外观， <a class="code">computeNormals()</a> 允许我们的几何体具有适当的照明。</p>

      <script type="text/p5" data-autoplay data-p5-version="1.7.0">
let myGeometry

function setup() {
  createCanvas(400, 400, WEBGL);

  let detailX = 20;
  let detailY = 20;
  myGeometry = new p5.Geometry(detailX,detailY, function() {
    
    // these nested for loops create a simple grid of vertices
    // which are affected by sin() and cos() on the z-axis
    for(let x = 0; x <= detailX; x++) {
      for(let y = 0; y <= detailY; y++) {
        this.vertices.push(new p5.Vector(
          x/detailX,
          y/detailY,
          (sin(x/detailX*TWO_PI*4) + cos(y/detailY*TWO_PI)) / 10
          // random()/10
        ));
      }
    }

    // this will attach all our vertices and create faces automatically
    this.computeFaces();
    // this will calculate the normals to help with lighting
    this.computeNormals();
  });

  describe('a greenish plane shape that is warped and lit');
}

function draw() {
  background(220);
  
  orbitControl();
  
  //set a basic light to see that normals are calculated
  pointLight(255,255,0,0,50,-50);
  
  push();
  stroke(128);
  let geoSize = width/2;
  rotateY(cos(millis() / 1000)*PI/4);
  translate(-geoSize/2,-geoSize/2);
  scale(geoSize);
  model(myGeometry);
  pop();
}
      </script>

      <h2 id="conclusion">结论</h2>

      <p>现在，您应该能够创建自定义的几何体，从其他工具或代码中创建独特的形状变为可能。花一些时间使用各种 3D 建模工具，以便找到最适合您的那个。</p>

      <h3>其他教程</h3>
      <p>这个教程是关于使用 p5.js 中 WebGL 基础的系列之一。以下是其他教程： </p>
      <ul class="indexList">
        <li><a href="/zh-Hans/learn/getting-started-in-webgl-coords-and-transform.html">坐标和变换</a></li>
        <li>在 WebGL 中创建自定义几何图形 （你现在处于这里）</li>
        <li><a href="/zh-Hans/learn/getting-started-in-webgl-appearance.html">样式和外观</a></li>
        <li><a href="/zh-Hans/learn/getting-started-in-webgl-shaders.html">入门 Shaders</a></li>
      </ul>

      <h2 id="glossary">词汇表</h2>

      <h3>过程化的</h3>
      <p>意味着某物是通过数学定义的，而不是通过存储的数据，例如文件。</p>

      <h3>模型</h3>
      <p>几何形状的表示。</p>

      <h3>STL</h3>
      <p>"STL"（通常代表“标准制图语言”）是用于 3D 模型的文件格式。它仅存储有关几何形状的信息。</p>

      <h3>OBJ</h3>
      <p>"OBJ" 是一种开放的文件格式，它存储几何数据以及一些材质和纹理数据。在 p5.js 中，我们只能使用它的几何数据，尽管仍可以使用纹理将图像映射到表面。</p>

      <h3>面</h3>
      <p>介于三点之间生成的固定表面。</p>

      <h3>法线</h3>
      <p>垂直于面的方向，通常在计算照明或使用材料时需要。</p>

      <h3>规范化</h3>
      <p>更改某物以适应标准范围。</p>


    </main>

    
    <footer>
        <h2 class="sr-only">归功于</h2>
        <ul id="footer-menu-socials" aria-labelledby="menu-title">   
          <li><a href="https://discourse.processing.org/c/p5js" target=_blank class="other-link">论坛</a></li>
          <li><a href="http://github.com/processing/p5.js" target=_blank class="other-link">GitHub</a></li>
          <li><a href="http://twitter.com/p5xjs" target=_blank class="other-link">Twitter</a></li>
          <li><a href="https://www.instagram.com/p5xjs/" target=_blank class="other-link">Instagram</a></li>
          <li><a href="https://discord.gg/SHQ8dH25r9" target=_blank class="other-link">Discord</a></li>
        </ul>  
    
        <ul id="footer-menu" aria-labelledby="menu-title">   
          <li><a href="/zh-Hans/">主页</a></li>
          <li><a href="https://editor.p5js.org">编辑器</a></li>
          <li><a href="/zh-Hans/download/">下载</a></li>
          <li><a href="/zh-Hans/download/support.html">捐赠</a></li>
          <li><a href="/zh-Hans/get-started/">入门</a></li>
          <li><a href="/zh-Hans/reference/">参考文献</a></li>
          <li><a href="/zh-Hans/libraries/">程式库</a></li>
          <li><a href="/zh-Hans/learn/">学习</a></li>
          <li><a href="/zh-Hans/teach/">教学</a></li>
          <li><a href="/zh-Hans/examples/">范例</a></li>
          <li><a href="https://p5js.org/contributor-docs/#/">贡献</a></li>
          <li><a href="/zh-Hans/books/">书籍</a></li>
          <li><a href="/zh-Hans/community/">社群</a></li>
          <li><a href="https://showcase.p5js.org">案例展示</a></li>
        </ul>  
        
        <p>
            p5.js 目前由<a href='http://qianqian-ye.com/' target="_blank">Qianqian Ye</a>领导，原创者为<a href='https://lauren-mccarthy.com' target="_blank">Lauren Lee McCarthy</a>。p5.js 是在<a href="https://processingfoundation.org/" target="_blank">Processing Foundation</a>和<a href="https://itp.nyu.edu/itp/" target="_blank">NYU ITP</a>的支持下由其合作社群所开发。形象及平面设计<a href="https://jereljohnson.com/" target="_blank">Jerel Johnson</a>。<a href="/zh-Hans/copyright.html">&copy; 版权信息</a>。
        </p>
    </footer>

  </div> <!-- end column-span -->

  
  <!-- outside of column for footer to go across both -->
  
  <p class="clearfix"> &nbsp; </p>
  
  <object type="image/svg+xml" data="../../../assets/img/thick-asterisk-alone.svg" id="asterisk-design-element" aria-hidden="true">
  </object>

</div><!-- end id="get-started-page"  -->

    </div> <!-- close class='container'-->

    
    <nav id="family" aria-labelledby="processing-sites-heading">
      <h2 id="processing-sites-heading" class="sr-only">Processing Sister Sites</h2>
      <ul id="processing-sites" aria-labelledby="processing-sites-heading">
        <li><a href="https://processing.org">Processing</a></li>
        <li><a class="here" href="/zh-Hans/">p5.js</a></li>
        <li><a href="https://py.processing.org/">Processing.py</a></li>
        <li><a href="https://android.processing.org/">Processing for Android</a></li>
        <li><a href="https://pi.processing.org/">Processing for Pi</a></li>
        <li><a href="https://processingfoundation.org/">Processing Foundation</a></li>
      </ul>
      <a tabindex="1" href="#content" id="skip-to-content">Skip to main content</a>
    
    
    </nav>
    <script>
    var langs = ["en","es","hi","ko","zh-Hans"];

      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-53383000-1', 'auto');
    ga('send', 'pageview');

    $(window).ready(function() {
      if (window.location.pathname !== '/' && window.location.pathname !== '/index.html') {
        $('#top').remove();
      } else {
        $('#top').show();
      }
    });
    </script>


  </body>
</html>
